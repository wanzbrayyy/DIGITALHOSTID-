<%- include('partials/header', { title: title }) %>

<style>
    .table-wrapper { overflow-x: auto; }
    table { width: 100%; border-collapse: collapse; }
    table th, table td { padding: 12px 15px; text-align: left; border-bottom: 1px solid var(--nexus-border-color); white-space: nowrap; }
    table th { font-weight: 600; background-color: #f9fafb; }

    .price-display strong {
        color: var(--nexus-primary-dark);
    }
    .price-display .price-original {
        text-decoration: line-through;
        color: var(--nexus-text-gray);
        font-size: 0.85rem;
        margin-left: 8px;
    }
</style>

<div class="container" style="padding-top: 2rem; padding-bottom: 2rem;">
 /style>


<h1>Beli Sertifikat SSL</h1>
<p>Amankan website Anda dan tingkatkan kepercayaan pengunjung dengan enkripsi SSL.</p>

<div class="table-wrapper card">
    <table>
        <thead>
            <tr>
                <th>Nama Produk</th>
                <th>Tipe</th>
                <th>Validasi</th>
                <th>Harga/Tahun</th>
                <th>Aksi</th>
            </tr>
        </thead>
        <tbody>
            <% if (sslProducts && sslProducts.length > 0) { %>
                <% sslProducts.forEach(product => { %>
                    <tr>
                        <td><strong><%= product.name %></strong><br><small><%= product.brand %></small></td>
                        <td><%= product.ssl_type %> <%= product.is_wildcard ? 'Wildcard' : '' %></td>
                        <td><%= product.features.validation %></td>
                        <td>
                            <strong>Rp <%= product.price.toLocaleString('id-ID') %></strong>
                            <% if (product.has_override && product.price < product.original_price) { %>
                                <span class="price-original">Rp <%= product.original_price.toLocaleString('id-ID') %></span>
                            <% } %>
                        </td>
                        <td>
                            <!-- **PERBAIKAN: Gunakan 'priceId' yang baru** -->
                            <a href="/ssl/order/<%= product.priceId %>" class="btn btn-primary btn-sm">Pesan</a>
                        </td>
                    </tr>
                <% }) %>
            <% } else { %>
                <tr><td colspan="5" style="text-align: center; padding: 20px;">Produk SSL tidak tersedia saat ini.</td></tr>
            <% } %>
        </tbody>
    </table>
</div>

<%- include('partials/footer') %>