<%- include('../partials/header', { title: 'Kelola Produk' }) %>

<h1><i class="fas fa-box-open"></i> Kelola Produk</h1>
<p>Atur produk yang ditampilkan di halaman utama seperti Hosting, VPS, dll.</p>

<div class="grid-2">
    <div class="card">
        <h2>Tambah Produk Baru</h2>
        <form action="/admin/products/create" method="POST">
            <div class="form-group">
                <label for="name">Nama Produk (cth: Personal)</label>
                <input type="text" name="name" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="description">Deskripsi Singkat</label>
                <input type="text" name="description" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="price">Harga (angka saja, cth: 12000)</label>
                <input type="number" name="price" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="features">Fitur (pisahkan dengan koma)</label>
                <input type="text" name="features" class="form-control" placeholder="1 Website, 10GB SSD, ...">
            </div>
            <div class="form-group">
                <label for="icon">Ikon (Font Awesome, cth: fas fa-user)</label>
                <input type="text" name="icon" class="form-control" value="fas fa-server">
            </div>
             <div class="form-group">
                <label><input type="checkbox" name="isFeatured" checked style="margin-right: 8px;"> Tampilkan di Halaman Utama</label>
            </div>
            <button type="submit" class="btn btn-primary" style="width: 100%;">Simpan Produk</button>
        </form>
    </div>

    <div class="card">
        <h2>Daftar Produk</h2>
        <div class="table-wrapper">
            <table>
                <thead>
                    <tr><th>Nama</th><th>Harga</th><th>Aksi</th></tr>
                </thead>
                <tbody>
                    <% if (products && products.length > 0) { %>
                        <% products.forEach(product => { %>
                            <tr>
                                <td><i class="<%= product.icon %>" style="margin-right: 10px; width: 20px; text-align: center;"></i> <%= product.name %></td>
                                <td>Rp <%= product.price.toLocaleString('id-ID') %></td>
                                <td>
                                    <form action="/admin/products/<%= product._id %>/delete" method="POST" onsubmit="return confirm('Yakin hapus produk ini?')">
                                        <button type="submit" class="btn btn-danger btn-sm"><i class="fas fa-trash"></i></button>
                                    </form>
                                </td>
                            </tr>
                        <% }) %>
                    <% } else { %>
                        <tr><td colspan="3" style="text-align: center; padding: 20px;">Belum ada produk.</td></tr>
                    <% } %>
                </tbody>
            </table>
        </div>
    </div>
</div>
<%- include('../partials/footer') %>

